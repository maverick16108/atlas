# WebSocket ‚Äî –†–µ–∞–ª—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-----------|----------|
| **–°–µ—Ä–≤–µ—Ä** | Laravel Reverb | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π WebSocket-—Å–µ—Ä–≤–µ—Ä Laravel |
| **–ü—Ä–æ—Ç–æ–∫–æ–ª** | Pusher Protocol | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å pusher-js SDK |
| **–ö–ª–∏–µ–Ω—Ç** | Laravel Echo + pusher-js | JS-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã |
| **–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç** | WebSocket (ws/wss) | –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ |

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—â–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     HTTP      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    broadcast()    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ö–ª–∏–µ–Ω—Ç    ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ  Laravel API  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ    Reverb     ‚îÇ
‚îÇ  (–±—Ä–∞—É–∑–µ—Ä)  ‚îÇ              ‚îÇ  (PHP-FPM)    ‚îÇ                  ‚îÇ (WS-—Å–µ—Ä–≤–µ—Ä)  ‚îÇ
‚îÇ             ‚îÇ ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ               ‚îÇ                  ‚îÇ  –ø–æ—Ä—Ç 8080   ‚îÇ
‚îÇ  Echo.js    ‚îÇ  WebSocket   ‚îÇ               ‚îÇ                  ‚îÇ              ‚îÇ
‚îÇ  pusher-js  ‚îÇ ‚óÄ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï™‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï™‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï°              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**1. –°—Ç–∞–≤–∫–∞ –≤ –∞—É–∫—Ü–∏–æ–Ω–µ:**
```
–£—á–∞—Å—Ç–Ω–∏–∫ –¥–µ–ª–∞–µ—Ç —Å—Ç–∞–≤–∫—É
  ‚Üí POST /api/client/auctions/{id}/bid
    ‚Üí Laravel —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç Bid –≤ –ë–î
      ‚Üí event(new BidPlaced($auctionId, $bidData))
        ‚Üí Reverb –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –∫–∞–Ω–∞–ª `auction.{id}` –∏ `auctions`
          ‚Üí –í—Å–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —Å–æ–±—ã—Ç–∏–µ `.bid.placed`
            ‚Üí –ö–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç fetchAuction() –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
```

**2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫—É:**
```
–ê–¥–º–∏–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ / –∞—É–∫—Ü–∏–æ–Ω –∑–∞–≤–µ—Ä—à—ë–Ω
  ‚Üí ClientNotification::create([...])
    ‚Üí Model::booted() ‚Üí event(new NewClientNotification($userId, $data))
      ‚Üí Reverb –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –∫–∞–Ω–∞–ª `notifications.user.{userId}`
        ‚Üí –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç `.new.notification`
          ‚Üí notifications.unshift(data), unreadCount++
```

**3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—É–∫—Ü–∏–æ–Ω–∞ (–∞–¥–º–∏–Ω):**
```
–ê–¥–º–∏–Ω –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å / –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞—É–∫—Ü–∏–æ–Ω–∞
  ‚Üí event(new AuctionUpdated($auctionId, $auctionData))
    ‚Üí Reverb –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –∫–∞–Ω–∞–ª—ã `auction.{id}` –∏ `auctions`
      ‚Üí –ö–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç `.auction.updated`
        ‚Üí fetchAuction() / –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤
```

---

## –ö–∞–Ω–∞–ª—ã (Channels)

–í—Å–µ –∫–∞–Ω–∞–ª—ã ‚Äî **–ø—É–±–ª–∏—á–Ω—ã–µ** (public), –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ API.

| –ö–∞–Ω–∞–ª | –¢–∏–ø | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|-----|-----------|
| `auction.{id}` | Public | –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞—É–∫—Ü–∏–æ–Ω–∞ (—Å—Ç–∞–≤–∫–∏, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, —Å—Ç–∞—Ç—É—Å) |
| `auctions` | Public | –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –∞—É–∫—Ü–∏–æ–Ω–æ–≤ (—Å–ø–∏—Å–∫–∏, —Å—á—ë—Ç—á–∏–∫–∏) |
| `notifications.user.{id}` | Public | –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

---

## –°–æ–±—ã—Ç–∏—è (Events)

### BidPlaced

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------|---------|
| **–ö–ª–∞—Å—Å** | `App\Events\BidPlaced` |
| **Broadcast –∏–º—è** | `.bid.placed` |
| **–ö–∞–Ω–∞–ª—ã** | `auction.{id}`, `auctions` |
| **–î–∞–Ω–Ω—ã–µ** | –ü–æ–ª–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å—Ç–∞–≤–∫–∏ (id, amount, bar_count, created_at, ‚Ä¶) |
| **–¢—Ä–∏–≥–≥–µ—Ä** | –£—á–∞—Å—Ç–Ω–∏–∫ –ø–æ–¥–∞—ë—Ç —Å—Ç–∞–≤–∫—É —á–µ—Ä–µ–∑ `ClientAuctionController::submitBid()` |

### OfferPlaced

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------|---------|
| **–ö–ª–∞—Å—Å** | `App\Events\OfferPlaced` |
| **Broadcast –∏–º—è** | `.offer.placed` |
| **–ö–∞–Ω–∞–ª—ã** | `auction.{id}` |
| **–î–∞–Ω–Ω—ã–µ** | –û–±—ä–µ–∫—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (id, volume, price, ‚Ä¶) |
| **–¢—Ä–∏–≥–≥–µ—Ä** | –£—á–∞—Å—Ç–Ω–∏–∫ –ø–æ–¥–∞—ë—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π |

### AuctionUpdated

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------|---------|
| **–ö–ª–∞—Å—Å** | `App\Events\AuctionUpdated` |
| **Broadcast –∏–º—è** | `.auction.updated` |
| **–ö–∞–Ω–∞–ª—ã** | `auction.{id}`, `auctions` |
| **–î–∞–Ω–Ω—ã–µ** | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä: id, status, title, updated_at |
| **–¢—Ä–∏–≥–≥–µ—Ä** | –ê–¥–º–∏–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç –∞—É–∫—Ü–∏–æ–Ω, —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞, –ì–ü–ë —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–∞–≤–æ |

### NewClientNotification

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------|---------|
| **–ö–ª–∞—Å—Å** | `App\Events\NewClientNotification` |
| **Broadcast –∏–º—è** | `.new.notification` |
| **–ö–∞–Ω–∞–ª—ã** | `notifications.user.{userId}` |
| **–î–∞–Ω–Ω—ã–µ** | id, type, title, message, auction_id, read_at, created_at |
| **–¢—Ä–∏–≥–≥–µ—Ä** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ `ClientNotification::create()` —á–µ—Ä–µ–∑ Model::booted() |

---

## –§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Äî –ü–æ–¥–ø–∏—Å–∫–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Echo

–§–∞–π–ª: `frontend/src/echo.js`

```javascript
const echo = new Echo({
    broadcaster: 'reverb',
    key: import.meta.env.VITE_REVERB_APP_KEY,
    wsHost: import.meta.env.VITE_REVERB_HOST,
    wsPort: import.meta.env.VITE_REVERB_PORT ?? 80,
    wssPort: import.meta.env.VITE_REVERB_PORT ?? 443,
    forceTLS: (import.meta.env.VITE_REVERB_SCHEME ?? 'https') === 'https',
    enabledTransports: ['ws', 'wss'],
})
```

### –¢–æ—á–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–∞–Ω–∞–ª | –°–æ–±—ã—Ç–∏—è | –î–µ–π—Å—Ç–≤–∏–µ |
|-----------|-------|---------|----------|
| **ClientAuctionRoom.vue** | `auction.{id}` | `.bid.placed`, `.offer.placed`, `.auction.updated` | `fetchAuction()` ‚Äî –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∞—É–∫—Ü–∏–æ–Ω–∞ |
| **AuctionDetail.vue** (–∞–¥–º–∏–Ω) | `auction.{id}` | `.bid.placed`, `.offer.placed`, `.auction.updated` | `loadAuction()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ |
| **ClientAuctions.vue** | `auctions` | `.bid.placed`, `.auction.updated` | `fetchAuctions()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ |
| **ClientDashboard.vue** | `auctions` | `.bid.placed`, `.auction.updated` | `fetchDashboard()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞ |
| **ClientLayout.vue** | `notifications.user.{id}` | `.new.notification` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Å–ø–∏—Å–æ–∫, —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ |

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–§–∞–π–ª: `frontend/src/composables/useConnectionStatus.js`

Composable –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ Pusher connection state:

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | isConnected | statusText |
|-----------|------------|------------|
| `connected` | `true` | ¬´–û–Ω–ª–∞–π–Ω –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è¬ª |
| `connecting` / `initialized` | `false` | ¬´–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...¬ª |
| `unavailable` / `failed` / `disconnected` | `false` | ¬´–ù–µ—Ç —Å–≤—è–∑–∏¬ª |

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ö–µ–¥–µ—Ä–µ –∞—É–∫—Ü–∏–æ–Ω–∞: üü¢/üî¥ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä.

---

## –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Docker)

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```yaml
# WebSocket-—Å–µ—Ä–≤–µ—Ä
reverb:
  image: atlas-app
  container_name: atlas_reverb
  command: ["php", "artisan", "reverb:start", "--host=0.0.0.0", "--port=8080"]
  environment:
    REVERB_APP_KEY: atlas-reverb-key
    REVERB_APP_SECRET: atlas-reverb-secret
```

### Nginx –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ

WebSocket-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Nginx –Ω–∞ Reverb:

```nginx
# /app ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π WebSocket endpoint
location /app {
    proxy_pass http://reverb:8080;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_read_timeout 86400;   # 24 —á–∞—Å–∞ ‚Äî keepalive
}

# /apps ‚Äî —Å–ª—É–∂–µ–±–Ω—ã–π endpoint Reverb
location /apps {
    proxy_pass http://reverb:8080;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_read_timeout 86400;
}
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | Backend (.env) | Frontend (VITE_) |
|-----------|---------------|-----------------|
| APP_KEY | `atlas-reverb-key` | `VITE_REVERB_APP_KEY` |
| HOST | `reverb` (–∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) | `VITE_REVERB_HOST` (localhost / –¥–æ–º–µ–Ω) |
| PORT | `8080` (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π) | `VITE_REVERB_PORT` (80 —á–µ—Ä–µ–∑ Nginx) |
| SCHEME | `http` (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π) | `VITE_REVERB_SCHEME` (http/https) |

---

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

```
1. –ö–ª–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
   ‚Üí Echo –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Pusher-js
     ‚Üí WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ws://host:port/app/atlas-reverb-key
       ‚Üí Reverb –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

2. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–Ω–∞–ª—ã
   ‚Üí echo.channel('auction.61') ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞
   ‚Üí echo.channel('notifications.user.5') ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞

3. –ù–∞ –±—ç–∫–µ–Ω–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ–±—ã—Ç–∏–µ
   ‚Üí event(new BidPlaced(61, $bidData))
   ‚Üí Laravel Broadcaster –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Reverb
   ‚Üí Reverb –ø—É—à–∏—Ç –≤ –∫–∞–Ω–∞–ª auction.61

4. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ
   ‚Üí .listen('.bid.placed', callback)
   ‚Üí callback –≤—ã–∑—ã–≤–∞–µ—Ç fetchAuction() –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

5. –ö–ª–∏–µ–Ω—Ç –ø–æ–∫–∏–¥–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
   ‚Üí echo.leaveChannel('auction.61') ‚Äî –æ—Ç–ø–∏—Å–∫–∞
   ‚Üí WebSocket –æ—Å—Ç–∞—ë—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–∞–Ω–∞–ª–æ–≤
```

---

## –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (ClientNotification)

| type | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è | title |
|------|-------------------|-------|
| `auction_invite` | –ê–¥–º–∏–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –∞—É–∫—Ü–∏–æ–Ω | ¬´–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω¬ª |
| `success` | –ê—É–∫—Ü–∏–æ–Ω –∑–∞–≤–µ—Ä—à—ë–Ω, —É—á–∞—Å—Ç–Ω–∏–∫ –≤—ã–∏–≥—Ä–∞–ª | ¬´–ü–æ–±–µ–¥–∞ –≤ —Ç–æ—Ä–≥–∞—Ö! üèÜ¬ª |
| `warning` | –ê—É–∫—Ü–∏–æ–Ω –∑–∞–≤–µ—Ä—à—ë–Ω, —á–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–±–µ–¥–∞ | ¬´–ß–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–±–µ–¥–∞ ‚ö°¬ª |
| `info` | –ê—É–∫—Ü–∏–æ–Ω –∑–∞–≤–µ—Ä—à—ë–Ω, —É—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–æ–∏–≥—Ä–∞–ª | ¬´–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞—É–∫—Ü–∏–æ–Ω–∞¬ª |

---

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Reverb
```bash
docker compose logs reverb --tail=20
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å WebSocket –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
–í DevTools ‚Üí Network ‚Üí WS –≤–∫–ª–∞–¥–∫–∞. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω WebSocket-–∑–∞–ø—Ä–æ—Å –∫ `/app/atlas-reverb-key`.

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
docker compose exec app php artisan tinker --execute="
event(new \App\Events\AuctionUpdated(1, ['id'=>1,'status'=>'active','title'=>'Test','updated_at'=>now()]));
echo 'Event sent!';
"
```

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|---------|
| –ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è | Reverb –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω | `docker compose up reverb -d` |
| –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –µ—Å—Ç—å, —Å–æ–±—ã—Ç–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π APP_KEY | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `.env` –∏ `VITE_REVERB_APP_KEY` |
| ¬´–ù–µ—Ç —Å–≤—è–∑–∏¬ª –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ | Nginx –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç WS | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `proxy_set_header Upgrade/Connection` |
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π user_id –≤ –∫–∞–Ω–∞–ª–µ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `echo.channel('notifications.user.${userId}')` |
